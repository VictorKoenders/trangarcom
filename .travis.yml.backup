language: rust
dist: xenial
services:
    - docker
addons:
    apt:
        packages:
            - libssl-dev
        script:
            - cargo test || travis_terminate 1;
            - cargo build --release || travis_terminate 1;
            - docker build -t trangarcom . || travis_terminate 1;
        before_deploy:
            - docker save trangarcom --output trangarcom.tar
        deploy:
            provider: releases
            api_key:
                secure: <...bla..>>
            file: trangarcom.tar
                skip_cleanup: true
                on:
                    repo: VictorKoenders/trangarcom
                    tags: true
